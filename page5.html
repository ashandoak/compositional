<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Compositionality Interactive — Page 5</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>

<body data-page="5" data-prev="page4.html" data-next="index.html">
  <div class="app">
    <div class="top">
      <h1>Now you try it</h1>
      <p>
        Use functional primitives to build a solution that meets the goal. Drag an array, a primitive, and (if needed) a function into the workspace.
      </p>
    </div>

    <div class="main page3-grid">
      <div class="page3-spacer" aria-hidden="true"></div>

      <!-- Center: hero workspace (IDENTICAL STRUCTURE TO PAGE 3) -->
      <section class="panel page3-hero" aria-label="Interactive workspace">
        <!-- (kept for structure, hidden by CSS on page 3) -->
        <div class="panel-header">
          <div class="title">Workspace</div>
          <div class="pill">Build a pipeline</div>
        </div>

        <!-- PANEL BODY: interactive area ONLY -->
        <div class="panel-body">
          <div class="workspace page3-workspace" id="workspace" aria-label="Workspace surface">
            <div class="ws-row">
              <div class="slot" id="slotArray">
                <div class="slot-label">Array</div>
                <div class="slot-body">
                  <span class="placeholder">Drop an array here</span>
                </div>
              </div>
            </div>

            <div class="ws-row">
              <div class="slot" id="slotPrimitive">
                <div class="slot-label">Primitive</div>
                <div class="slot-body">
                  <span class="placeholder">Drop a primitive here</span>
                </div>
              </div>

              <div class="slot" id="slotFunction">
                <div class="slot-label">Function (optional)</div>
                <div class="slot-body">
                  <span class="placeholder">Drop a predicate/transform here (if needed)</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PANEL FOOTER: terminal is OUTSIDE panel-body (IDENTICAL TO PAGE 3) -->
        <div class="panel-footer page3-terminal">
          <div class="terminal" aria-label="Python preview and output">
            <div class="term-title">
              <div class="label">Python (preview & output)</div>
              <div class="muted">simulated</div>
            </div>

            <pre id="preview"># Drag an array + a primitive + (if needed) a function</pre>
            <div class="term-sep"></div>
            <pre id="result" class="muted">Output:
—</pre>
            <pre id="hint" class="muted" style="margin-top:10px; display:none;"></pre>
          </div>
        </div>
      </section>

      <!-- Right: toolbox (IDENTICAL TO PAGE 3) -->
      <section class="panel page3-bank" aria-label="Toolbox">
        <div class="panel-header">
          <div class="title">Toolbox</div>
          <div class="pill">Drag items</div>
        </div>

        <div class="panel-body">
          <div class="group-title">Arrays</div>

          <div class="draggable" draggable="true" data-type="array" data-id="a1">
            <span>nums = [1, 2, 3, 4, 5, 6]</span>
          </div>
          <div class="draggable" draggable="true" data-type="array" data-id="a2">
            <span>nums = [0, 1, 2, 3, 4]</span>
          </div>
          <div class="draggable" draggable="true" data-type="array" data-id="a3">
            <span>nums = [-3, -2, -1, 0, 1, 2]</span>
          </div>

          <div style="height:14px;"></div>

          <div class="group-title">Primitives</div>

          <div class="draggable" draggable="true" data-type="primitive" data-id="filter">
            <span>filter( predicate, data )</span>
          </div>
          <div class="draggable" draggable="true" data-type="primitive" data-id="map">
            <span>map( transform, data )</span>
          </div>
          <div class="draggable" draggable="true" data-type="primitive" data-id="sum">
            <span>sum( data )</span>
          </div>

          <div style="height:14px;"></div>

          <div class="group-title">Functions</div>

          <div class="bank-subhead">Predicates (✔/✖)</div>

          <div class="draggable" draggable="true" data-type="fn" data-kind="predicate" data-id="is_even">
            <span>is_even(x)</span>
          </div>
          <div class="draggable" draggable="true" data-type="fn" data-kind="predicate" data-id="is_positive">
            <span>is_positive(x)</span>
          </div>
          <div class="draggable" draggable="true" data-type="fn" data-kind="predicate" data-id="greater_than_2">
            <span>greater_than_2(x)</span>
          </div>

          <div style="height:14px;"></div>

          <div class="bank-subhead">Transforms (→)</div>

          <div class="draggable" draggable="true" data-type="fn" data-kind="transform" data-id="square">
            <span>square(x)</span>
          </div>
          <div class="draggable" draggable="true" data-type="fn" data-kind="transform" data-id="double">
            <span>double(x)</span>
          </div>
          <div class="draggable" draggable="true" data-type="fn" data-kind="transform" data-id="negate">
            <span>negate(x)</span>
          </div>

          <!-- Keep the element if your JS references it, but hide via CSS -->
          <div class="hint" id="rightHint" style="margin-top:12px;"></div>
        </div>
      </section>
    </div>

    <!-- Bottom bar (IDENTICAL TO PAGE 3) -->
    <div class="bottom">
      <div class="btnrow">
        <button id="backBtn">◀ Back</button>
        <button id="resetBtn" class="btn-primary">Reset</button>
      </div>
      <div class="btnrow">
        <!-- Page 5 ends, but keep the same Next button for styling parity -->
        <button id="nextBtn" class="btn-next">Next ▶</button>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </div>

  <script src="assets/nav.js"></script>

  <!-- Page 5 behavior will be wired next. For now, a tiny stub so layout is testable. -->
  <script>
    // Keep navigation consistent with Page 3's buttons
    // (nav.js may already do this; this is harmless if duplicated.)
    const prev = document.body.dataset.prev;
    const next = document.body.dataset.next;

    const backBtn = document.getElementById("backBtn");
    const nextBtn = document.getElementById("nextBtn");

    if (backBtn) backBtn.addEventListener("click", () => { if (prev) location.href = prev; });
    if (nextBtn) nextBtn.addEventListener("click", () => { if (next) location.href = next; });

    // Reset is a no-op stub for now (behavior comes later)
    document.getElementById("resetBtn").addEventListener("click", () => {});
  </script>
</body>
</html>
